<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>O0ZE34's Crib REBORN â€” Shop</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  
  <!-- Paste your full <style> block from index.html here (snow, giftToast, codeRedeemer, editOverlay, oozeBeat, etc.) -->
  <!-- Add shop-specific styles -->
  <style>
    .shop-sections { display: grid; gap: 24px; }
    .shop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; }
    .shop-item {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 16px;
      padding: 16px;
      text-align: center;
      transition: transform 0.2s;
    }
    .shop-item:hover { transform: scale(1.04); }
    .shop-item p { margin: 8px 0; font-weight: 600; }
    .shop-item button { margin-top: 8px; padding: 8px 16px; border-radius: 12px; background: #3cff9a; color: #000; border: none; cursor: pointer; font-weight: bold; }
    .shop-item button:disabled { background: #555; cursor: not-allowed; }
    .equipped { border: 2px solid #3cff9a; box-shadow: 0 0 20px #3cff9a80; }
    .current-equipped { margin-bottom: 24px; padding: 12px; background: rgba(60,255,154,0.15); border-radius: 12px; }
  </style>
</head>
<body>
  <!-- Paste your existing elements: editOverlay, giftToast, updateModal, greeting-card, clock, sidebar (update Games â†’ Shop link), main wrapper -->

  <div class="main">
    <h1>ðŸ›’ Shop â€” Level Up Your Style</h1>

    <div class="current-equipped">
      <strong>Equipped:</strong> Trail: <span id="currentTrail">None</span> | Theme: <span id="currentTheme">Default</span>
    </div>

    <p>Your Level: <span id="lvl_num">1</span> | Coins: <span id="coins_display">0</span></p>

    <div class="shop-sections">

      <!-- Mouse Trails -->
      <div class="home-card">
        <h2>Mouse Trails</h2>
        <p>Unlock cooler trails at higher levels!</p>
        <div class="shop-grid">
          <div class="shop-item" data-trail="none">
            <p>None</p>
            <button onclick="equipTrail('none')">Equip (Free)</button>
          </div>
          <div class="shop-item" data-trail="sparkle" data-unlock="1">
            <p>Sparkle Stars</p>
            <button onclick="buyOrEquipTrail('sparkle', 400, 1)">Buy/Equip (400 Coins)</button>
          </div>
          <div class="shop-item" data-trail="hearts" data-unlock="5">
            <p>Love Hearts</p>
            <button onclick="buyOrEquipTrail('hearts', 900, 5)">Buy/Equip (900 Coins)</button>
          </div>
          <div class="shop-item" data-trail="rainbow" data-unlock="10">
            <p>Rainbow Comet</p>
            <button onclick="buyOrEquipTrail('rainbow', 1800, 10)">Buy/Equip (1800 Coins)</button>
          </div>
          <div class="shop-item" data-trail="ghost" data-unlock="15">
            <p>Ghost Cursors</p>
            <button onclick="buyOrEquipTrail('ghost', 2500, 15)">Buy/Equip (2500 Coins)</button>
          </div>
          <div class="shop-item" data-trail="fire" data-unlock="25">
            <p>Fire Trail</p>
            <button onclick="buyOrEquipTrail('fire', 4000, 25)">Buy/Equip (4000 Coins)</button>
          </div>
        </div>
      </div>

      <!-- Themes -->
      <div class="home-card">
        <h2>Themes</h2>
        <p>Change the whole vibe of the site!</p>
        <div class="shop-grid">
          <div class="shop-item" data-theme="default">
            <p>Default (Christmas)</p>
            <button onclick="equipTheme('default')">Equip (Free)</button>
          </div>
          <div class="shop-item" data-theme="neon" data-unlock="5">
            <p>Neon Cyberpunk</p>
            <button onclick="buyOrEquipTheme('neon', 1200, 5)">Buy/Equip (1200 Coins)</button>
          </div>
          <div class="shop-item" data-theme="pastel" data-unlock="10">
            <p>Pastel Vaporwave</p>
            <button onclick="buyOrEquipTheme('pastel', 2000, 10)">Buy/Equip (2000 Coins)</button>
          </div>
          <div class="shop-item" data-theme="retro" data-unlock="15">
            <p>Retro Arcade</p>
            <button onclick="buyOrEquipTheme('retro', 2800, 15)">Buy/Equip (2800 Coins)</button>
          </div>
          <div class="shop-item" data-theme="beach" data-unlock="20">
            <p>Dark Beach Sunset</p>
            <button onclick="buyOrEquipTheme('beach', 3500, 20)">Buy/Equip (3500 Coins)</button>
          </div>
          <div class="shop-item" data-theme="glitch" data-unlock="30">
            <p>Glitch Cyber</p>
            <button onclick="buyOrEquipTheme('glitch', 5000, 30)">Buy/Equip (5000 Coins)</button>
          </div>
        </div>
      </div>

      <!-- Coin Redeem -->
      <div class="home-card" id="codeRedeemer">
        <h2>Redeem Coin Code</h2>
        <input id="coinCodeInput" class="modal-input" placeholder="Enter code..." autocomplete="off" />
        <button class="save-btn" onclick="redeemCoinCode()">Redeem</button>
        <p id="coinMsg"></p>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script> <!-- if you have external js -->
  <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Load data & display
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function loadShopData() {
      const xp = BigInt(localStorage.getItem("xp") || "0");
      const level = Number(xp / 100n);
      const coins = parseInt(localStorage.getItem("coins") || "0");
      const equippedTrail = localStorage.getItem("equippedTrail") || "none";
      const equippedTheme = localStorage.getItem("equippedTheme") || "default";

      document.getElementById("lvl_num").innerText = level;
      document.getElementById("coins_display").innerText = coins;
      document.getElementById("currentTrail").innerText = equippedTrail.charAt(0).toUpperCase() + equippedTrail.slice(1);
      document.getElementById("currentTheme").innerText = equippedTheme.charAt(0).toUpperCase() + equippedTheme.slice(1);

      // Highlight equipped items
      document.querySelectorAll('.shop-item').forEach(item => {
        const trail = item.dataset.trail;
        const theme = item.dataset.theme;
        if ((trail && trail === equippedTrail) || (theme && theme === equippedTheme)) {
          item.classList.add("equipped");
        }
      });
    }

    // Call on load
    window.addEventListener("load", () => {
      loadXP(); // your existing
      loadCoins(); // your existing or define as parseInt(localStorage.getItem("coins") || "0")
      loadShopData();
    });

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Coin Redeem
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const COIN_CODES = {
      "freecoins2026": 1000,
      "oozegrind": 3000,
      "valentinesday": 5000, // since it's Feb 14, 2026
      "levelupking": 10000,
      "secretstash": 25000
    };

    function redeemCoinCode() {
      const input = document.getElementById("coinCodeInput");
      const msg = document.getElementById("coinMsg");
      const code = input.value.trim().toLowerCase();
      input.value = "";

      if (COIN_CODES[code]) {
        addCoins(COIN_CODES[code]);
        msg.textContent = `Success! +${COIN_CODES[code]} Coins ðŸŽ‰`;
        msg.style.color = "#3cff9a";
      } else {
        msg.textContent = "Invalid or expired code ðŸ˜•";
        msg.style.color = "tomato";
      }
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Buy / Equip Trail
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function buyOrEquipTrail(trail, cost, requiredLevel) {
      const level = Number(BigInt(localStorage.getItem("xp") || "0") / 100n);
      if (level < requiredLevel) {
        alert(`Need level ${requiredLevel}+ to unlock this trail!`);
        return;
      }

      let coins = parseInt(localStorage.getItem("coins") || "0");
      const alreadyOwned = true; // for simplicity; in real, track purchased items if you want one-time buy

      if (cost > 0 && coins < cost) {
        alert("Not enough coins! Grind more dailies or codes.");
        return;
      }

      if (cost > 0) {
        coins -= cost;
        localStorage.setItem("coins", coins);
      }

      localStorage.setItem("equippedTrail", trail);
      loadShopData();
      alert(`Equipped ${trail} trail! Refresh other pages to see it.`);
    }

    function equipTrail(trail) {
      localStorage.setItem("equippedTrail", trail);
      loadShopData();
      alert(`Equipped ${trail} trail!`);
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Buy / Equip Theme (similar logic)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function buyOrEquipTheme(theme, cost, requiredLevel) {
      const level = Number(BigInt(localStorage.getItem("xp") || "0") / 100n);
      if (level < requiredLevel) {
        alert(`Need level ${requiredLevel}+ to unlock this theme!`);
        return;
      }

      let coins = parseInt(localStorage.getItem("coins") || "0");
      if (cost > 0 && coins < cost) {
        alert("Not enough coins!");
        return;
      }

      if (cost > 0) {
        coins -= cost;
        localStorage.setItem("coins", coins);
      }

      localStorage.setItem("equippedTheme", theme);
      loadShopData();
      alert(`Equipped ${theme} theme! Refresh to apply site-wide.`);
    }

    function equipTheme(theme) {
      localStorage.setItem("equippedTheme", theme);
      loadShopData();
      alert(`Equipped ${theme} theme!`);
    }

    // Your addCoins / loadCoins / loadXP functions here (from previous)
    function addCoins(amount) {
      let coins = parseInt(localStorage.getItem("coins") || "0");
      coins += amount;
      localStorage.setItem("coins", coins);
      document.getElementById("coins_display").innerText = coins;
    }

    function loadCoins() {
      document.getElementById("coins_display").innerText = parseInt(localStorage.getItem("coins") || "0");
    }

    // ... your loadXP, claimDaily with lucky day, etc. ...
  </script>

  <!-- Shared apply script for theme + trail (paste in every page including this one) -->
  <script>
    function applyEquippedStuff() {
      const theme = localStorage.getItem("equippedTheme") || "default";
      const trail = localStorage.getItem("equippedTrail") || "none";

      // Remove old classes
      document.body.classList.remove("theme-default", "theme-neon", "theme-pastel", "theme-retro", "theme-beach", "theme-glitch");
      document.body.classList.add(`theme-${theme}`);

      // Mouse trail canvas (enhanced)
      if (trail !== "none") {
        let canvas = document.getElementById("trailCanvas");
        if (!canvas) {
          canvas = document.createElement("canvas");
          canvas.id = "trailCanvas";
          canvas.style.cssText = "position:fixed;inset:0;pointer-events:none;z-index:9999;";
          document.body.appendChild(canvas);
        }
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        let hue = 0;

        document.addEventListener("mousemove", e => {
          particles.push({x: e.clientX, y: e.clientY, life: 40, hue: hue});
          hue = (hue + 5) % 360;
        });

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          particles.forEach((p, i) => {
            p.life--;
            if (p.life <= 0) return particles.splice(i, 1);

            const alpha = p.life / 40;
            const size = p.life / 4;

            if (trail === "sparkle") {
              ctx.fillStyle = `hsla(${p.hue}, 100%, 80%, ${alpha})`;
              ctx.beginPath();
              ctx.arc(p.x, p.y, size, 0, Math.PI*2);
              ctx.fill();
            } else if (trail === "hearts") {
              ctx.font = `${size*3}px Arial`;
              ctx.fillStyle = `rgba(255,105,180,${alpha})`;
              ctx.fillText("ðŸ’–", p.x - size*1.5, p.y + size);
            } else if (trail === "rainbow") {
              ctx.strokeStyle = `hsl(${p.hue}, 100%, 60%)`;
              ctx.lineWidth = size*2;
              ctx.beginPath();
              ctx.moveTo(p.x, p.y);
              ctx.lineTo(p.x + Math.sin(p.life)*20, p.y + Math.cos(p.life)*20);
              ctx.stroke();
            } // add cases for ghost, fire, etc. with different shapes/colors
          });
          requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener("resize", () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });
      }
    }

    window.addEventListener("load", applyEquippedStuff);
  </script>
</body>
</html>
